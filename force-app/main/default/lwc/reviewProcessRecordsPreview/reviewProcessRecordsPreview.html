<template>
    <lightning-modal-header label={label}></lightning-modal-header>

    <lightning-modal-body>
        <lightning-spinner lwc:if={isLoading} alternative-text="Loading" size="small"></lightning-spinner>
        <div lwc:else class="slds-p-top_small slds-p-bottom_medium slds-text-align_center">
            <lightning-formatted-rich-text
                class="slds-text-heading_small slds-p-horizontal_medium"
                value={contentHtml}>
            </lightning-formatted-rich-text>
        </div>

        <div class="slds-p-horizontal_medium">
            <div class="records-table slds-scrollable_x">
                <template lwc:if={records}>
                    <lightning-datatable
                        key-field="Id"
                        data={records}
                        show-row-number-column
                        hide-checkbox-column
                        enable-infinite-loading
                        is-loading={isLoadingDatatable}
                        onloadmore={handleLoadMoreRecords}
                        columns={columns}>
                    </lightning-datatable>
                </template>
                <template lwc:else>
                    <div class="slds-text-align_center slds-text-title slds-m-top_xx-small">No records found</div>
                </template>
            </div>
        </div>
    </lightning-modal-body>

    <lightning-modal-footer>
        <button lwc:if={isConfigPreview} type="button" class="slds-button slds-button_neutral" onclick={handleBack}>Go Back</button>
        <button type="submit" class="okay-button slds-m-left_xx-small slds-button slds-button_brand" onclick={handleOkay}>{closeButtonTitle}</button>
    </lightning-modal-footer>
</template>